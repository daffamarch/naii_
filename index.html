<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 3rd Anniversary</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">

    <style>
        /* --- CSS SETUP (THE PINK ROMANTIC THEME) --- */
        :root {
            --primary-pink: #ffb7c5;
            /* Pink pastel */
            --deep-pink: #d63384;
            /* Pink tua elegan */
            --text-color: #5a3e45;
            /* Warna teks coklat kemerahan (tidak hitam pekat) */
            --bg-color: #fff0f3;
            /* Background sangat muda */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            text-align: center;
        }

        /* --- BACKGROUND ANIMATION (FLOATING HEARTS) --- */
        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .heart {
            position: absolute;
            bottom: -50px;
            background-color: rgba(255, 183, 197, 0.5);
            width: 20px;
            height: 20px;
            transform: rotate(45deg);
            animation: floatUp 10s infinite linear;
        }

        .heart::before,
        .heart::after {
            content: "";
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: inherit;
            border-radius: 50%;
        }

        .heart::before {
            top: -10px;
            left: 0;
        }

        .heart::after {
            top: 0;
            left: -10px;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(45deg);
                opacity: 0;
            }

            20% {
                opacity: 0.8;
            }

            100% {
                transform: translateY(-100vh) rotate(45deg);
                opacity: 0;
            }
        }

        /* --- OPENING SCREEN --- */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }

        .btn-open {
            padding: 15px 40px;
            background: var(--deep-pink);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 5px 15px rgba(214, 51, 132, 0.3);
            transition: transform 0.3s;
        }

        .btn-open:hover {
            transform: scale(1.05);
        }

        /* --- MAIN CONTENT --- */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            display: none;
            /* Hidden until clicked */
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: var(--deep-pink);
            margin-top: 30px;
        }

        .subtitle {
            font-size: 1rem;
            margin-bottom: 40px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #888;
        }

        /* PHOTO FRAME (16:9 LANDSCAPE) */
        .photo-frame {
            width: 100%;
            max-width: 450px;
            aspect-ratio: 16 / 9;
            height: auto;
            margin: 0 auto 40px;
            border: 8px solid white;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border-radius: 10px;
            transform: rotate(-2deg);
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ELEGANT BUTTONS (Classy Revert) */
        .fun-btn {
            background: var(--deep-pink);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(214, 51, 132, 0.2);
            margin: 8px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .fun-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(214, 51, 132, 0.4);
            background: #c21b6c;
            /* Slightly darker on hover */
        }

        .miss-me-btn {
            background: white;
            color: var(--deep-pink);
            border: 2px solid var(--deep-pink);
            font-weight: 600;
        }

        .miss-me-btn:hover {
            background: var(--bg-color);
            color: var(--deep-pink);
        }

        /* MESSAGE CARDS */
        .card {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: left;
        }

        .card h3 {
            color: var(--deep-pink);
            margin-bottom: 10px;
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
        }

        /* --- LYRICS SECTION (THE CORE FEATURE) --- */
        .lyrics-section {
            margin-top: 50px;
            padding: 40px 20px;
            min-height: 400px;
            position: relative;
        }

        #lyrics-container {
            font-size: 1.1rem;
            line-height: 2.5;
            height: 300px;
            overflow: hidden;
            /* Hide non-active lyrics */
            position: relative;
        }

        .lyric-line {
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0.3;
            transform: scale(0.9);
            filter: blur(1px);
        }

        .lyric-line.active {
            opacity: 1;
            transform: scale(1.1);
            color: var(--deep-pink);
            font-weight: 600;
            filter: blur(0);
            text-shadow: 0 0 10px rgba(214, 51, 132, 0.4);
        }

        /* Hidden Audio Player */
        audio {
            display: none;
        }

        /* Music Control */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 10px;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 99;
        }
    </style>
</head>

<body>

    <style>
        /* Music FAB (Floating Action Button) */
        .music-fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 999;
            border: 2px solid var(--deep-pink);
            transition: transform 0.2s;
        }

        .music-fab:active {
            transform: scale(0.9);
        }

        .music-fab i {
            color: var(--deep-pink);
            font-size: 20px;
        }

        /* Lyrics Fixes */
        #lyrics-container {
            height: auto;
            /* Let it grow */
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
            /* Allow manual scroll if needed */
            padding: 20px;
            mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
            scrollbar-width: none;
            /* Hide scrollbar Firefox */
        }

        #lyrics-container::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar Chrome */

        .lyric-line {
            padding: 10px 0;
            font-size: 1.2rem;
            /* Adjusted size */
            margin: 5px 0;
        }

        /* Section Title */
        .song-section-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: var(--deep-pink);
            margin: 40px 0 20px;
        }

        /* Footer */
        footer {
            margin-top: 50px;
            padding: 20px;
            font-size: 0.9rem;
            color: #888;
            font-family: 'Poppins', sans-serif;
        }

        /* MAIN PASSWORD INPUT (Beautiful Style) */
        .pass-input {
            margin-bottom: 10px;
            padding: 12px 25px;
            border: 2px solid var(--deep-pink);
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            color: var(--text-color);
            background: rgba(255, 255, 255, 0.9);
            text-align: center;
            width: 60%;
            max-width: 250px;
            outline: none;
            box-shadow: 0 5px 15px rgba(214, 51, 132, 0.1);
            transition: all 0.3s ease;
        }

        .pass-input:focus {
            border-color: var(--deep-pink);
            box-shadow: 0 0 0 4px rgba(214, 51, 132, 0.1);
            transform: scale(1.05);
        }

        .pass-input::placeholder {
            color: #aaa;
            font-style: italic;
        }

        /* REFINED INPUT for Miss Me Feature */
        .swal2-input {
            border-radius: 20px !important;
            border: 2px solid var(--deep-pink) !important;
            font-family: 'Poppins', sans-serif !important;
            color: var(--text-color) !important;
        }

        .swal2-title {
            font-family: 'Dancing Script', cursive !important;
            color: var(--deep-pink) !important;
        }
    </style>

    <div class="hearts-bg" id="hearts-bg"></div>

    <div class="music-fab" id="music-btn" onclick="toggleMusic()" style="display: none;">
        <i class="fas fa-play" id="music-icon"></i>
    </div>

    <div id="overlay">
        <h2
            style="margin-bottom: 20px; color: var(--deep-pink); font-family: 'Dancing Script', cursive; font-size: 2.5rem;">
            Love Lock üîí
        </h2>
        <p style="margin-bottom: 10px;">Enter the magic date to open</p>

        <input type="password" id="pass-input" class="pass-input" placeholder="ddmmyy">
        <p class="hint">Hint: Tanggal Jadian Kita</p>

        <button class="btn-open" onclick="checkPassword()">Unlock ‚ù§Ô∏è</button>
    </div>

    <div class="container" id="main-content">
        <h1>Three Years of Us</h1>
        <p class="subtitle">1,095 Days, Infinite Memories</p>

        <div class="photo-frame">
            <img src="foto berdua.jpeg" alt="Our Photo" id="main-photo">
        </div>

        <div class="card">
            <h3>To My Better Half</h3>
            <p>Three years ago, my life changed for the better. Thank you for sticking by my side through every high
                and every low. You are my peace."</p>
        </div>

        <div class="interactive-section">
            <button class="fun-btn" onclick="showReason()">Why I Love You?</button>
            <button class="fun-btn" onclick="burstHearts()">Send Love üíñ</button>
            <button class="fun-btn" onclick="memoryLane()">Throwback üì∏</button>
            <button class="fun-btn miss-me-btn" onclick="openMissMe()">Read when you miss me üíå</button>
        </div>

        <div class="card">
            <h3>Level 3 Unlocked</h3>
            <p>They say the spark fades, but with you, it only feels like the foundation is getting stronger. Let's
                keep growing together.</p>
        </div>

        <div class="song-section-title">Song that Reminds me of You</div>
        <div class="lyrics-section">
            <p style="font-size: 0.8rem; color: #aaa; margin-bottom: 20px;">(Music: The One - Kodaline)</p>
            <div id="lyrics-container">
            </div>
        </div>

        <footer>
            Made with all my heart by your better half <br> <span style="color: var(--deep-pink); font-weight: bold;">-
                Daffa</span>
        </footer>
    </div>

    <audio id="audio-player" src="Kodaline - The One (Lyrics).mp3" preload="auto"></audio>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        // CONFIG
        const CORRECT_PASSWORD = "150123";

        // LYRICS DATA
        const lyricsData = [
            { time: 125, text: "You make my heart feel like it's summer" },
            { time: 132, text: "When the rain is pouring down" },
            { time: 138, text: "You make my whole world feel so right when it's wrong" },
            { time: 145, text: "That's how I know you are the one" },
            { time: 150, text: "That's why I know you are the one" },

            { time: 156, text: "When we are together you make me feel like my mind is free" },
            { time: 161, text: "And my dreams are reachable, oh oh oh oh" },
            { time: 169, text: "You know I never ever believed in love or believed one day" },
            { time: 173, text: "That you would come along" },
            { time: 181, text: "And free me" },

            { time: 184, text: "You make my heart feel like it's summer" },
            { time: 191, text: "When the rain is pouring down" },
            { time: 197, text: "You make my whole world feel so right when it's wrong" },
            { time: 204, text: "That's how I know you are the one" },
            { time: 209, text: "That's why I know you are the one" },

            { time: 216, text: "That's why I know you are the one" },
            { time: 220, text: "Love you to the moon and back mbul üåô‚ù§Ô∏è" }
        ];

        // ELEMENTS
        const audio = document.getElementById('audio-player');
        const lyricsContainer = document.getElementById('lyrics-container');
        const overlay = document.getElementById('overlay');
        const mainContent = document.getElementById('main-content');
        const passInput = document.getElementById('pass-input');
        const musicBtn = document.getElementById('music-btn');
        const musicIcon = document.getElementById('music-icon');

        // PASSWORD LOGIC
        function checkPassword() {
            if (passInput.value === CORRECT_PASSWORD) {
                // ASK CONFIRMATION
                Swal.fire({
                    title: "Ready for this year's adventure?",
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#d63384',
                    cancelButtonColor: '#888',
                    confirmButtonText: 'Yes, I am!',
                    cancelButtonText: 'Not yet'
                }).then((result) => {
                    if (result.isConfirmed) {
                        startExperience();
                    }
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Wrong Date!',
                    text: 'Coba ingat tanggal jadian kita',
                    confirmButtonColor: '#d63384'
                });
            }
        }

        // MUSIC CONTROL
        function toggleMusic() {
            if (audio.paused) {
                audio.play();
                musicIcon.className = 'fas fa-pause';
            } else {
                audio.pause();
                musicIcon.className = 'fas fa-play';
            }
        }

        // NEW INTERACTIVE FEATURE
        function memoryLane() {
            Swal.fire({
                title: 'Remember this?',
                text: 'The first time we went out to eat/watch movies...',
                imageUrl: 'https://images.unsplash.com/photo-1522093537031-29a953842471?w=400', // Placeholder or use another local photo
                imageAlt: 'Memory',
                confirmButtonColor: '#d63384'
            });
        }

        // NEW FEATURE: MISS ME
        async function openMissMe() {
            const { value: password } = await Swal.fire({
                title: 'Kangen ya?',
                input: 'text',
                inputLabel: 'Film pertama yang kita tonton bareng?',
                inputPlaceholder: 'Jawab disini...',
                showCancelButton: true,
                confirmButtonColor: '#d63384',
                cancelButtonColor: '#888',
                customClass: {
                    input: 'swal2-input' // Styled above
                }
            });

            if (password) {
                // Check password (case insensitive)
                if (password.toLowerCase().trim().includes("avatar") && password.toLowerCase().trim().includes("way of water")) {
                    Swal.fire({
                        title: 'Hi, Sayangkuu Cintakuuu',
                        html: `
                            <div style="text-align: left; font-size: 0.9rem; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                                <img src="foto berdua part 2.jpeg" style="width:100%; border-radius:10px; margin-bottom:15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                                <p>Kalau kamu baca ini, I assume you‚Äôre missing me right now. Jujur, aku juga. More than you know.</p>
                                <p>Aku tau belakangan ini aku sering sibuk, sering sibuk depan laptop, dan mungkin waktu kita jadi sedikit berkurang. I‚Äôm sorry if it feels lonely sometimes. Tapi aku pengen kamu tau satu hal: Aku kerja keras kayak gini bukan cuma buat aku, tapi buat "kita".</p>
                                <p>Lagi banyak hal yang harus aku kejar, projects, dreams, and goals yang aku bangun biar masa depan kita nanti lebih cerah. I‚Äôm trying my best to build a life where we don't have to worry about anything. Jadi, tolong sabar sebentar ya? Sabar sama proses aku, sabar sama waktu aku.</p>
                                <p>Please don‚Äôt ever think that being busy means I don‚Äôt miss you. Justru setiap kali aku capek atau stuck sama tugas atau sesuatu yang aku kerjain, kamu alasan aku buat lanjut lagi. You are my fuel.</p>
                                <p>It‚Äôs been 3 years, and looking back, I realize how lucky I am. Di masa depan, entah seberapa sukses atau beratnya hidup nanti, satu hal yang pasti: I will always, always choose you. Whatever happens, I‚Äôm sticking with you.</p>
                                <p>Tunggu & temenin aku ya sayang. Nanti aku bayar lunas semua kangennya.</p>
                                <p style="color: var(--deep-pink); font-weight: bold; margin-top: 10px;">I love you, always meskipun fist date tumpahin popcorn :D.</p>
                            </div>
                        `,
                        width: 600,
                        confirmButtonColor: '#d63384',
                        confirmButtonText: 'I Love You More ‚ù§Ô∏è'
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Salah sayang...',
                        text: 'Hint: Film biru makhluk asing yang panjang durasinya itu loh!',
                        confirmButtonColor: '#d63384'
                    });
                }
            }
        }

        // --- SEQUENTIAL LOVE REASONS ---
        let reasonIndex = 0;
        const reasons = [
            "Mata kamu",
            "Sabar banget",
            "My Support System",
            "Pelukable",
            "My Home",
            "I love you without a reason",
            "I love you because you are you"
        ];

        function showReason() {
            Swal.fire({
                title: 'Alasan #' + (reasonIndex + 1),
                text: reasons[reasonIndex],
                icon: 'heart',
                confirmButtonColor: '#d63384',
                confirmButtonText: 'Next Reason ‚ù§Ô∏è'
            });
            // Cycle through reasons
            reasonIndex = (reasonIndex + 1) % reasons.length;
        }

        function burstHearts() { createHearts(); Swal.fire({ title: 'Sent!', text: 'Virtual Hugs! XOXO', timer: 1500, showConfirmButton: false }); }
        // FEATURE: THROWBACK (MEMORY LANE) - UPDATED
        async function memoryLane() {
            const { value: password } = await Swal.fire({
                title: 'Throwback Locked üîí',
                input: 'text',
                inputLabel: 'Toko buku yang sering kita kunjungin?',
                inputPlaceholder: 'Jawaban...',
                showCancelButton: true,
                confirmButtonColor: '#d63384',
                cancelButtonColor: '#888'
            });

            if (password) {
                if (password.toLowerCase().trim() === "singgalang") {
                    Swal.fire({
                        title: 'Sweet Memory',
                        html: `
                            <img src="foto berdua part 3.jpeg" style="width:100%; border-radius:10px; margin-bottom:15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                            <p style="text-align:center; font-style:regular; font-size: 0.95rem; line-height: 1.6;">hahahaha ini lucu bangett pas aku temenin kamu beliin alat tulis buat mail terus ternyata setelah selesai bayar hujan dan aku kehujanann tapi sebetulnya aku suka sihhh asal bareng kamu hehehehe</p>
                        `,
                        width: 500,
                        confirmButtonColor: '#d63384',
                        confirmButtonText: 'So Sweet ‚ù§Ô∏è'
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Salah...',
                        text: 'Hint: Depannya S belakangnya G',
                        confirmButtonColor: '#d63384'
                    });
                }
            }
        }

        // INIT
        function initLyrics() {
            lyricsContainer.innerHTML = "";
            lyricsData.forEach((line, index) => {
                const p = document.createElement('p');
                p.classList.add('lyric-line');
                p.id = `line-${index}`;
                p.innerText = line.text;
                lyricsContainer.appendChild(p);
            });
        }

        // SCROLL FIX: Only scroll when line changes!
        let lastActiveIndex = -1;

        function syncLyrics() {
            const currentTime = audio.currentTime;
            let activeIndex = -1;

            // Find current active line
            for (let i = 0; i < lyricsData.length; i++) {
                if (currentTime >= lyricsData[i].time) activeIndex = i;
                else break;
            }

            // Update UI only if changed
            if (activeIndex !== -1 && activeIndex !== lastActiveIndex) {
                document.querySelectorAll('.lyric-line').forEach(el => el.classList.remove('active'));
                const activeLine = document.getElementById(`line-${activeIndex}`);
                if (activeLine) {
                    activeLine.classList.add('active');
                    // Scroll ONLY when line changes
                    activeLine.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                lastActiveIndex = activeIndex;
            }
        }

        // --- SAFARI FIX START ---
        // Kita ubah logika startExperience agar sesuai kebijakan Safari
        function startExperience() {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                mainContent.style.display = 'block';
                musicBtn.style.display = 'flex';

                setTimeout(() => { mainContent.style.opacity = '1'; }, 100);

                // 1. Play dulu (wajib interaksi user)
                var playPromise = audio.play();

                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        // 2. Kalau berhasil play, baru set menitnya
                        audio.currentTime = 125;
                        musicIcon.className = 'fas fa-pause';

                        // 3. Double Check (Kadang Safari bandel kalau buffering belum nyampe)
                        if (audio.currentTime < 100) {
                            setTimeout(() => { audio.currentTime = 125; }, 500);
                        }
                    })
                        .catch(error => {
                            console.log("Auto-play blocked:", error);
                        });
                }

                audio.addEventListener('timeupdate', syncLyrics);

            }, 1000);
        }
        // --- SAFARI FIX END ---

        function createHearts() {
            const container = document.getElementById('hearts-bg');
            for (let i = 0; i < 15; i++) {
                let heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.animationDuration = Math.random() * 5 + 5 + "s";
                heart.style.opacity = Math.random();
                container.appendChild(heart);
            }
        }

        initLyrics();
        createHearts();
    </script>
</body>

</html>
